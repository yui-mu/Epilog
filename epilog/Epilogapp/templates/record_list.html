{% extends 'base.html' %}
{% block content %}

<h1 class="page-title">ã‚¹ã‚­ãƒ³ã‚±ã‚¢è¨˜éŒ²ã®å±¥æ­´ä¸€è¦§</h1>

<!-- ä¸¦ã³é †é¸æŠãƒ•ã‚©ãƒ¼ãƒ  -->
<form method="get" style="text-align: right; margin-bottom: 20px;">
  <label for="sort">ä¸¦ã³é †ï¼š</label>
  <select name="sort" id="sort" onchange="this.form.submit()">
    <option value="desc" {% if request.GET.sort == "desc" or not request.GET.sort %}selected{% endif %}>æ–°ã—ã„é †</option>
    <option value="asc" {% if request.GET.sort == "asc" %}selected{% endif %}>å¤ã„é †</option>
  </select>
</form>

<!-- ã‚«ã‚¹ã‚¿ãƒ CSS -->
<style>
  .history-container {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .history-card {
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 12px;
    padding: 16px;
    display: flex;
    gap: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    align-items: flex-start;
  }

  .history-image {
    max-width: 200px;
    border-radius: 8px;
  }

  .history-info {
    flex: 1;
  }
</style>

<!-- è¨˜éŒ²ã®è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
<div class="history-container">
  {% for record in records %}
    <div class="history-card">
      {% if record.photo %}
        <img src="{{ record.photo.url }}" alt="è‚Œã®å†™çœŸ" class="history-image">
      {% endif %}
      <div class="history-info">
        <h3>{{ record.record_date }}</h3>

        <p>
          {% if record.skin_rating == 1 %} ğŸ˜„ ã¨ã¦ã‚‚è‰¯ã„
          {% elif record.skin_rating == 2 %} ğŸ™‚ è‰¯ã„
          {% elif record.skin_rating == 3 %} ğŸ˜ æ™®é€š
          {% elif record.skin_rating == 4 %} ğŸ˜• ã‚„ã‚„æ‚ªã„
          {% elif record.skin_rating == 5 %} ğŸ˜£ æ‚ªã„
          {% endif %}
        </p>

        <p><strong>æœï¼š</strong> {{ record.morning_items }}</p>
        <p><strong>å¤œï¼š</strong> {{ record.night_items }}</p>

        <p><a href="{% url 'record_detail' record.pk %}">è©³ç´°ã‚’è¦‹ã‚‹</a></p>
      </div>
    </div>
  {% endfor %}
</div>

{% endblock %}



