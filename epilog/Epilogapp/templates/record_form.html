{% extends 'base.html' %}
{% block content %}

<h1>ã‚¹ã‚­ãƒ³ã‚±ã‚¢è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ </h1>

<form method="post" enctype="multipart/form-data">
  {% csrf_token %}

  <!-- æ—¥ä»˜ -->
  <p>
    {{ form.record_date.label_tag }}<br>
    {{ form.record_date }}
  </p>

  <!-- è‚Œã®è©•ä¾¡ï¼ˆé¡”ã‚¢ã‚¤ã‚³ãƒ³ä»˜ããƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ï¼‰ -->
  <div class="form-group">
    <strong>{{ form.skin_rating.label }}</strong><br>
    {% for choice in form.skin_rating %}
      <label style="display: inline-block; margin-right: 12px;">
        {{ choice.tag }}
        {% if choice.choice_label == "ã¨ã¦ã‚‚è‰¯ã„" %}
          ğŸ˜„ ã¨ã¦ã‚‚è‰¯ã„
        {% elif choice.choice_label == "è‰¯ã„" %}
          ğŸ™‚ è‰¯ã„
        {% elif choice.choice_label == "æ™®é€š" %}
          ğŸ˜ æ™®é€š
        {% elif choice.choice_label == "ã‚„ã‚„æ‚ªã„" %}
          ğŸ˜• ã‚„ã‚„æ‚ªã„
        {% elif choice.choice_label == "æ‚ªã„" %}
          ğŸ˜£ æ‚ªã„
        {% else %}
          {{ choice.choice_label }}
        {% endif %}
      </label>
    {% endfor %}
  </div>

  <!-- è‚Œã®çŠ¶æ…‹ãƒ¡ãƒ¢ -->
  <p>
    {{ form.skin_condition.label_tag }}<br>
    {{ form.skin_condition }}
  </p>

  <!-- è‚Œã®å†™çœŸ -->
  <p>
    {{ form.photo.label_tag }}<br>
    {{ form.photo }}
  </p>

  <!-- ä½¿ç”¨ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div style="margin-top: 30px;">
    <h3 style="border-bottom: 2px solid #a7d7c5; color: #2e5947;">ä½¿ç”¨ã—ãŸã‚¹ã‚­ãƒ³ã‚±ã‚¢ã‚¢ã‚¤ãƒ†ãƒ </h3>
  
    <!-- æœã‚¢ã‚¤ãƒ†ãƒ  -->
{% with morning_list as ml %}
<div style="border: 1px solid #a7d7c5; padding: 16px; border-radius: 12px; margin-top: 20px; background-color: #f5f9f6;">
  <strong>ğŸŒ æœã«ä½¿ã£ãŸã‚¢ã‚¤ãƒ†ãƒ ï¼ˆä½¿ç”¨é †ï¼‰</strong><br><br>
  {% for i in "123456" %}
  <div style="margin-bottom: 12px;">
    <label>{{ forloop.counter }}ç•ªç›®ï¼š</label><br>

    <input type="text" class="morning-input-name"
           placeholder="å•†å“å"
           style="margin-bottom: 4px; width: 80%;"><br>

    <input type="text" class="morning-input-ingredient"
           placeholder="æˆåˆ†åï¼ˆä»»æ„ï¼‰"
           style="width: 80%;">
  </div>
  {% endfor %}
  {{ form.morning_items }}
</div>
{% endwith %}

<!-- å¤œã‚¢ã‚¤ãƒ†ãƒ  -->
{% with night_list as nl %}
<div style="border: 1px solid #a7d7c5; padding: 16px; border-radius: 12px; margin-top: 20px; background-color: #f5f9f6;">
  <strong>ğŸŒ™ å¤œã«ä½¿ã£ãŸã‚¢ã‚¤ãƒ†ãƒ ï¼ˆä½¿ç”¨é †ï¼‰</strong><br><br>
  {% for i in "123456" %}
    <div style="margin-bottom: 12px;">
      <label>{{ forloop.counter }}ç•ªç›®ï¼š</label><br>

      <input type="text" class="night-input-name"
             placeholder="å•†å“å"
             style="margin-bottom: 4px; width: 80%;"><br>

      <input type="text" class="night-input-ingredient"
             placeholder="æˆåˆ†åï¼ˆä»»æ„ï¼‰"
             style="width: 80%;">
    </div>
  {% endfor %}
  {{ form.night_items }}
</div>
{% endwith %}

  <!-- è‚Œã®æ‚©ã¿ -->
  <p>
    {{ form.concerns.label_tag }}<br>
    {{ form.concerns }}
  </p>

  <!-- æ°—ã«ãªã‚‹æˆåˆ† -->
  <p>
    {{ form.ingredients.label_tag }}<br>
    {{ form.ingredients }}
  </p>

  <button type="submit">è¨˜éŒ²ã™ã‚‹</button>
</form>

<script>
    document.addEventListener("DOMContentLoaded", function () {
      function updateInputs(inputClass, targetId) {
        const values = Array.from(document.querySelectorAll('.' + inputClass))
                            .map(input => input.value.trim())
                            .filter(v => v);
        document.getElementById(targetId).value = values.join(', ');
      }
  
      // æœ
      document.querySelectorAll('.morning-input-name').forEach(input => {
        input.addEventListener('input', () =>
          updateInputs('morning-input-name', '{{ form.morning_items.id_for_label }}')
        );
      });
  
      // å¤œ
      document.querySelectorAll('.night-input-name').forEach(input => {
        input.addEventListener('input', () =>
          updateInputs('night-input-name', '{{ form.night_items.id_for_label }}')
        );
      });
    });
  </script>
<p><a href="{% url 'home' %}">â† ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a></p>

{% endblock %}
